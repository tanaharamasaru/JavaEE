CREATE TABLE 
users (
	user_id		VARCHAR (8),
	name		VARCHAR (128)	NOT NULL,
	email		VARCHAR (128)	NOT NULL,
	password	VARCHAR (16)	NOT NULL,
	postal_code	VARCHAR (8)	NOT NULL,
	address		VARCHAR (255)	NOT NULL,
	tel		VARCHAR (13)	NOT NULL,
	PRIMARY KEY (user_id)
);

CREATE TABLE 
category (
	category_cd		VARCHAR (3),
	category_name	VARCHAR (128)	NOT NULL,
	PRIMARY KEY (category_cd)
);

CREATE TABLE 
product (
	product_id		VARCHAR (8),
	category_cd		VARCHAR (3)		NOT NULL,
	product_name	VARCHAR (128)	NOT NULL,
	price			INTEGER			NOT NULL,
	detail			VARCHAR (255)	,
	path			VARCHAR (255)	,
	stock			INTEGER			NOT NULL,
	PRIMARY KEY (product_id),
	FOREIGN KEY (category_cd) REFERENCES category(category_cd)
);



CREATE TABLE 
orders (
	order_id		INTEGER generated by default as identity,
	user_id			VARCHAR (8) 	NOT NULL,
	order_date		DATE			NOT NULL,
	PRIMARY KEY (order_id),
	FOREIGN KEY (user_id) REFERENCES users(user_id)
);


CREATE TABLE 
order_detail (
	order_detail_id		INTEGER generated by default as identity,
	order_id			INTEGER 		NOT NULL,
	order_date			DATE			NOT NULL,
	detail_no			INTEGER			NOT NULL,
	product_id			VARCHAR (8)		NOT NULL,
	quantity			INTEGER			NOT NULL,
	PRIMARY KEY (order_detail_id),
	FOREIGN KEY (order_id)   REFERENCES orders(order_id),
	FOREIGN KEY (product_id) REFERENCES product(product_id)
);

